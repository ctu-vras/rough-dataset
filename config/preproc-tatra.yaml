out_format: '{bag_base}.preproc{ext}'
compression: lz4
filters:
  - MergeInitialStaticTf:
      add_tags: [ "copied_tf" ]
  - CopyFirstTfToBagStart:
      add_tags: [ "copied_tf" ]
  - RemovePasswordsFromParams: {}
  # Make sure we have TFs also for images that have stamps slightly before the start of the bag
  - FixHeader:
      include_tags: [ "copied_tf" ]
      stamp_offset: -2.0
  - Remap:
      "/points_filtered_kontron": "/points_filtered"
  - Topics:
      exclude_topics:
        - /robot_bounding_box_debug
        - /robot_bounding_sphere_debug
        - /robot_model_for_bounding_box
        - /robot_model_for_bounding_sphere
        - /rosout
        - /rosout_agg
  - Deduplicate:
      ignore_seq: True
      include_topics:
        - /abs_active
        - /brake/cmd_acc
        - /fix
        - /fix_detail
        - /joint_states
        - /odom_2d
        - /tf
        - /vehicle_imu/data_raw
  - MagnetometerGaussToTesla:
      scale_covariance: False
      include_topics:
        - imu/mag
        - imu/mag_bias
        - imu/mag_unbiased
  - AddStaticTF:
      - frame_id: base_link
        child_frame_id: base_footprint
        transform: [0.0, 0.0, -0.545, 0.0, 0.0, 0.0]
  - RemoveInvalidTF: { }
  - DeduplicateTF:
      cache_size: 10
